//@isTest(SeeAllData=true)
@isTest
private class DNBITest{ 

	/*public static List<Account> createAccountsWithOpps(Integer numAccts, Integer numOppsPerAcct) {
        List<Account> accts = new List<Account>();
        
        for(Integer i=0;i<numAccts;i++) {
            Account a = new Account(Name=';TestAccount'; + i);
            accts.add(a);
        }
        insert accts;
        
        List<Opportunity> opps = new List<Opportunity>();
        for (Integer j=0;j<numAccts;j++) {
            Account acct = accts[j];
            // For each account just inserted, add opportunities
            for (Integer k=0;k<numOppsPerAcct;k++) {
                opps.add(new Opportunity(Name=acct.Name + '; Opportunity '; + k,
                                       StageName=';Prospecting';,
                                       CloseDate=System.today().addMonths(1),
                                       AccountId=acct.Id));
            }
        }
        // Insert all opportunities for all accounts.
        insert opps;
        
        return accts;

    }*/

    private class Mock implements HttpCalloutMock {
        public HTTPResponse respond(HTTPRequest req) {

        	String auth_url = '{ "TransactionDetail": { "ServiceTransactionID": "Id-8653845b0c737da666a53b16", "TransactionTimestamp": "2018-08-27T15:39:50.316", "ApplicationTransactionID":"" }, "TransactionResult": { "SeverityText": "Information", "ResultID": "CM000", "ResultText": "Success", "ResultMessage": { "ResultDescription": "Success" } }, "AuthenticationDetail": { "Token": "82LjOHrjju14ZFO23levreBw8eQTw76exQL5EbZ2eZLYeDq1JJ5VJ9YMLIGm5yRQYB2Nwv3qPy7" } }';
        	String duns_url = '{"MatchResponse":{"@ServiceVersionNumber":"4.0","TransactionDetail":{"ServiceTransactionID":"Id-38ac685be3f64340bef61bba-1","TransactionTimestamp":"2018-08-06T20:14:48.970"},"TransactionResult":{"SeverityText":"Information","ResultID":"CM000","ResultText":"Success"},"MatchResponseDetail":{"MatchDataCriteriaText":{"$":"Name and Address Lookup"},"CandidateMatchedQuantity":6,"MatchCandidate":[{"DUNSNumber":"804735132","OrganizationPrimaryName":{"OrganizationName":{"$":"GORMAN MANUFACTURING COMPANY, INC."}},"PrimaryAddress":{"StreetAddressLine":[{"LineText":"492 KOLLER ST"}],"PrimaryTownName":"SAN FRANCISCO","CountryISOAlpha2Code":"US","PostalCode":"94110","TerritoryAbbreviatedName":"CA","UndeliverableIndicator":false},"MailingAddress":{"CountryISOAlpha2Code":"US","UndeliverableIndicator":false},"TelephoneNumber":{"TelecommunicationNumber":"6505550000","UnreachableIndicator":false},"OperatingStatusText":{"$":"Active"},"FamilyTreeMemberRole":[{"FamilyTreeMemberRoleText":{"$":"Headquarters"}}],"StandaloneOrganizationIndicator":false,"MatchQualityInformation":{"ConfidenceCodeValue":6,"MatchBasis":[{"EndIndicator":false,"SubjectTypeText":"Business","SeniorPrincipalIndicator":false,"MatchBasisText":{"$":"Primary Name"}},{"EndIndicator":false,"SubjectTypeText":"Business","SeniorPrincipalIndicator":false,"MatchBasisText":{"$":"Primary Address"}}],"MatchGradeText":"AZZZAZZZFFZ","MatchGradeComponentCount":11,"MatchGradeComponent":[{"MatchGradeComponentTypeText":{"$":"Name"},"MatchGradeComponentRating":"A","MatchGradeComponentScore":100},{"MatchGradeComponentTypeText":{"$":"Street Number"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Street Name"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"City"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"State"},"MatchGradeComponentRating":"A","MatchGradeComponentScore":100},{"MatchGradeComponentTypeText":{"$":"PO Box"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Phone"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Postal Code"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Density"},"MatchGradeComponentRating":"F","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Uniqueness"},"MatchGradeComponentRating":"F","MatchGradeComponentScore":20},{"MatchGradeComponentTypeText":{"$":"Sic"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0}],"MatchDataProfileText":"0099999900999899000000009898","MatchDataProfileComponentCount":14,"MatchDataProfileComponent":[{"MatchDataProfileComponentTypeText":{"$":"Name"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"Street Number"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"Street Name"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"City"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"State"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"PO Box"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"Phone"},"MatchDataProfileComponentValue":"98"},{"MatchDataProfileComponentTypeText":{"$":"Postal Code"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"DUNS"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"SIC"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"Density"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"Uniqueness"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"National ID"},"MatchDataProfileComponentValue":"98"},{"MatchDataProfileComponentTypeText":{"$":"URL"},"MatchDataProfileComponentValue":"98"}]},"DisplaySequence":1},{"DUNSNumber":"362281243","OrganizationPrimaryName":{"OrganizationName":{"$":"GORMAN MANUFACTURING COMPANY, INC."}},"PrimaryAddress":{"StreetAddressLine":[{"LineText":"1073 S BOYLE AVE"}],"PrimaryTownName":"LOS ANGELES","CountryISOAlpha2Code":"US","PostalCode":"90023","PostalCodeExtensionCode":"1246","TerritoryAbbreviatedName":"CA","UndeliverableIndicator":false},"MailingAddress":{"CountryISOAlpha2Code":"US","UndeliverableIndicator":false},"TelephoneNumber":{"TelecommunicationNumber":"6505550000","UnreachableIndicator":false},"OperatingStatusText":{"$":"Active"},"FamilyTreeMemberRole":[{"FamilyTreeMemberRoleText":{"$":"Branch"}}],"StandaloneOrganizationIndicator":false,"MatchQualityInformation":{"ConfidenceCodeValue":6,"MatchBasis":[{"EndIndicator":false,"SubjectTypeText":"Business","SeniorPrincipalIndicator":false,"MatchBasisText":{"$":"Primary Name"}},{"EndIndicator":false,"SubjectTypeText":"Business","SeniorPrincipalIndicator":false,"MatchBasisText":{"$":"Primary Address"}}],"MatchGradeText":"AZZZAZZZFFZ","MatchGradeComponentCount":11,"MatchGradeComponent":[{"MatchGradeComponentTypeText":{"$":"Name"},"MatchGradeComponentRating":"A","MatchGradeComponentScore":100},{"MatchGradeComponentTypeText":{"$":"Street Number"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Street Name"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"City"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"State"},"MatchGradeComponentRating":"A","MatchGradeComponentScore":100},{"MatchGradeComponentTypeText":{"$":"PO Box"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Phone"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Postal Code"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Density"},"MatchGradeComponentRating":"F","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Uniqueness"},"MatchGradeComponentRating":"F","MatchGradeComponentScore":20},{"MatchGradeComponentTypeText":{"$":"Sic"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0}],"MatchDataProfileText":"0099999900999899000000009898","MatchDataProfileComponentCount":14,"MatchDataProfileComponent":[{"MatchDataProfileComponentTypeText":{"$":"Name"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"Street Number"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"Street Name"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"City"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"State"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"PO Box"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"Phone"},"MatchDataProfileComponentValue":"98"},{"MatchDataProfileComponentTypeText":{"$":"Postal Code"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"DUNS"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"SIC"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"Density"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"Uniqueness"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"National ID"},"MatchDataProfileComponentValue":"98"},{"MatchDataProfileComponentTypeText":{"$":"URL"},"MatchDataProfileComponentValue":"98"}]},"DisplaySequence":2},{"DUNSNumber":"009175688","OrganizationPrimaryName":{"OrganizationName":{"$":"GORMAN MFG CO INC"}},"PrimaryAddress":{"StreetAddressLine":[{"LineText":"8129 JUNIPERO ST STE A"}],"PrimaryTownName":"SACRAMENTO","CountryISOAlpha2Code":"US","PostalCode":"95828","PostalCodeExtensionCode":"1603","TerritoryAbbreviatedName":"CA","UndeliverableIndicator":false},"MailingAddress":{"StreetAddressLine":[{"LineText":"PO BOX 756"}],"PrimaryTownName":"WOODLAND","CountryISOAlpha2Code":"US","PostalCode":"95776","TerritoryAbbreviatedName":"CA","UndeliverableIndicator":false},"TelephoneNumber":{"TelecommunicationNumber":"5306620211","UnreachableIndicator":false},"OperatingStatusText":{"$":"Out of Business"},"StandaloneOrganizationIndicator":true,"MatchQualityInformation":{"ConfidenceCodeValue":6,"MatchBasis":[{"EndIndicator":false,"SubjectTypeText":"Business","SeniorPrincipalIndicator":false,"MatchBasisText":{"$":"Primary Name"}},{"EndIndicator":false,"SubjectTypeText":"Business","SeniorPrincipalIndicator":false,"MatchBasisText":{"$":"Primary Address"}}],"MatchGradeText":"AZZZAZZZFFZ","MatchGradeComponentCount":11,"MatchGradeComponent":[{"MatchGradeComponentTypeText":{"$":"Name"},"MatchGradeComponentRating":"A","MatchGradeComponentScore":100},{"MatchGradeComponentTypeText":{"$":"Street Number"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Street Name"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"City"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"State"},"MatchGradeComponentRating":"A","MatchGradeComponentScore":100},{"MatchGradeComponentTypeText":{"$":"PO Box"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Phone"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Postal Code"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Density"},"MatchGradeComponentRating":"F","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Uniqueness"},"MatchGradeComponentRating":"F","MatchGradeComponentScore":20},{"MatchGradeComponentTypeText":{"$":"Sic"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0}],"MatchDataProfileText":"0099999900999899000000009898","MatchDataProfileComponentCount":14,"MatchDataProfileComponent":[{"MatchDataProfileComponentTypeText":{"$":"Name"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"Street Number"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"Street Name"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"City"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"State"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"PO Box"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"Phone"},"MatchDataProfileComponentValue":"98"},{"MatchDataProfileComponentTypeText":{"$":"Postal Code"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"DUNS"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"SIC"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"Density"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"Uniqueness"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"National ID"},"MatchDataProfileComponentValue":"98"},{"MatchDataProfileComponentTypeText":{"$":"URL"},"MatchDataProfileComponentValue":"98"}]},"DisplaySequence":3},{"DUNSNumber":"199650169","OrganizationPrimaryName":{"OrganizationName":{"$":"GORMAN, DENNIS"}},"TradeStyleName":{"OrganizationName":{"$":"GORMAN MANUFACTURING"}},"PrimaryAddress":{"StreetAddressLine":[{"LineText":"12 W KENTUCKY AVE"}],"PrimaryTownName":"WOODLAND","CountryISOAlpha2Code":"US","PostalCode":"95695","PostalCodeExtensionCode":"5837","TerritoryAbbreviatedName":"CA","UndeliverableIndicator":false},"MailingAddress":{"CountryISOAlpha2Code":"US","UndeliverableIndicator":false},"TelephoneNumber":{"TelecommunicationNumber":"5306627750","UnreachableIndicator":false},"OperatingStatusText":{"$":"Out of Business"},"StandaloneOrganizationIndicator":true,"MatchQualityInformation":{"ConfidenceCodeValue":6,"MatchBasis":[{"EndIndicator":false,"SubjectTypeText":"Business","SeniorPrincipalIndicator":false,"MatchBasisText":{"$":"Trade style"}},{"EndIndicator":false,"SubjectTypeText":"Business","SeniorPrincipalIndicator":false,"MatchBasisText":{"$":"Primary Address"}}],"MatchGradeText":"AZZZAZZZBFZ","MatchGradeComponentCount":11,"MatchGradeComponent":[{"MatchGradeComponentTypeText":{"$":"Name"},"MatchGradeComponentRating":"A","MatchGradeComponentScore":100},{"MatchGradeComponentTypeText":{"$":"Street Number"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Street Name"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"City"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"State"},"MatchGradeComponentRating":"A","MatchGradeComponentScore":100},{"MatchGradeComponentTypeText":{"$":"PO Box"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Phone"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Postal Code"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Density"},"MatchGradeComponentRating":"B","MatchGradeComponentScore":51},{"MatchGradeComponentTypeText":{"$":"Uniqueness"},"MatchGradeComponentRating":"F","MatchGradeComponentScore":20},{"MatchGradeComponentTypeText":{"$":"Sic"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0}],"MatchDataProfileText":"0299999900999899000000009898","MatchDataProfileComponentCount":14,"MatchDataProfileComponent":[{"MatchDataProfileComponentTypeText":{"$":"Name"},"MatchDataProfileComponentValue":"02"},{"MatchDataProfileComponentTypeText":{"$":"Street Number"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"Street Name"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"City"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"State"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"PO Box"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"Phone"},"MatchDataProfileComponentValue":"98"},{"MatchDataProfileComponentTypeText":{"$":"Postal Code"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"DUNS"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"SIC"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"Density"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"Uniqueness"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"National ID"},"MatchDataProfileComponentValue":"98"},{"MatchDataProfileComponentTypeText":{"$":"URL"},"MatchDataProfileComponentValue":"98"}]},"DisplaySequence":4},{"DUNSNumber":"038732116","OrganizationPrimaryName":{"OrganizationName":{"$":"GORMAN MANUFACTURING COMPANY, INC."}},"PrimaryAddress":{"StreetAddressLine":[{"LineText":"1073 S BOYLE AVE"}],"PrimaryTownName":"LOS ANGELES","CountryISOAlpha2Code":"US","PostalCode":"90023","PostalCodeExtensionCode":"1246","TerritoryAbbreviatedName":"CA","UndeliverableIndicator":false},"MailingAddress":{"CountryISOAlpha2Code":"US","UndeliverableIndicator":false},"TelephoneNumber":{"TelecommunicationNumber":"6505550000","UnreachableIndicator":false},"OperatingStatusText":{"$":"Out of Business"},"FamilyTreeMemberRole":[{"FamilyTreeMemberRoleText":{"$":"Branch"}}],"StandaloneOrganizationIndicator":false,"MatchQualityInformation":{"ConfidenceCodeValue":6,"MatchBasis":[{"EndIndicator":false,"SubjectTypeText":"Business","SeniorPrincipalIndicator":false,"MatchBasisText":{"$":"Primary Name"}},{"EndIndicator":false,"SubjectTypeText":"Business","SeniorPrincipalIndicator":false,"MatchBasisText":{"$":"Primary Address"}}],"MatchGradeText":"AZZZAZZZFFZ","MatchGradeComponentCount":11,"MatchGradeComponent":[{"MatchGradeComponentTypeText":{"$":"Name"},"MatchGradeComponentRating":"A","MatchGradeComponentScore":100},{"MatchGradeComponentTypeText":{"$":"Street Number"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Street Name"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"City"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"State"},"MatchGradeComponentRating":"A","MatchGradeComponentScore":100},{"MatchGradeComponentTypeText":{"$":"PO Box"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Phone"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Postal Code"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Density"},"MatchGradeComponentRating":"F","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Uniqueness"},"MatchGradeComponentRating":"F","MatchGradeComponentScore":20},{"MatchGradeComponentTypeText":{"$":"Sic"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0}],"MatchDataProfileText":"0099999900999899000000009898","MatchDataProfileComponentCount":14,"MatchDataProfileComponent":[{"MatchDataProfileComponentTypeText":{"$":"Name"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"Street Number"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"Street Name"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"City"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"State"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"PO Box"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"Phone"},"MatchDataProfileComponentValue":"98"},{"MatchDataProfileComponentTypeText":{"$":"Postal Code"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"DUNS"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"SIC"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"Density"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"Uniqueness"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"National ID"},"MatchDataProfileComponentValue":"98"},{"MatchDataProfileComponentTypeText":{"$":"URL"},"MatchDataProfileComponentValue":"98"}]},"DisplaySequence":5},{"DUNSNumber":"088847942","OrganizationPrimaryName":{"OrganizationName":{"$":"GORMAN MFG & SUPPLY CO"}},"PrimaryAddress":{"StreetAddressLine":[{"LineText":"6516 MATTOS LN"}],"PrimaryTownName":"SACRAMENTO","CountryISOAlpha2Code":"US","PostalCode":"95829","PostalCodeExtensionCode":"9309","TerritoryAbbreviatedName":"CA","UndeliverableIndicator":false},"MailingAddress":{"CountryISOAlpha2Code":"US","UndeliverableIndicator":false},"TelephoneNumber":{"TelecommunicationNumber":"9163810282","UnreachableIndicator":false},"OperatingStatusText":{"$":"Out of Business"},"StandaloneOrganizationIndicator":true,"MatchQualityInformation":{"ConfidenceCodeValue":6,"MatchBasis":[{"EndIndicator":false,"SubjectTypeText":"Business","SeniorPrincipalIndicator":false,"MatchBasisText":{"$":"Primary Name"}},{"EndIndicator":false,"SubjectTypeText":"Business","SeniorPrincipalIndicator":false,"MatchBasisText":{"$":"Primary Address"}}],"MatchGradeText":"AZZZAZZZFFZ","MatchGradeComponentCount":11,"MatchGradeComponent":[{"MatchGradeComponentTypeText":{"$":"Name"},"MatchGradeComponentRating":"A","MatchGradeComponentScore":80},{"MatchGradeComponentTypeText":{"$":"Street Number"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Street Name"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"City"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"State"},"MatchGradeComponentRating":"A","MatchGradeComponentScore":100},{"MatchGradeComponentTypeText":{"$":"PO Box"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Phone"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Postal Code"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Density"},"MatchGradeComponentRating":"F","MatchGradeComponentScore":0},{"MatchGradeComponentTypeText":{"$":"Uniqueness"},"MatchGradeComponentRating":"F","MatchGradeComponentScore":20},{"MatchGradeComponentTypeText":{"$":"Sic"},"MatchGradeComponentRating":"Z","MatchGradeComponentScore":0}],"MatchDataProfileText":"0099999900999899000000009898","MatchDataProfileComponentCount":14,"MatchDataProfileComponent":[{"MatchDataProfileComponentTypeText":{"$":"Name"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"Street Number"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"Street Name"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"City"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"State"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"PO Box"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"Phone"},"MatchDataProfileComponentValue":"98"},{"MatchDataProfileComponentTypeText":{"$":"Postal Code"},"MatchDataProfileComponentValue":"99"},{"MatchDataProfileComponentTypeText":{"$":"DUNS"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"SIC"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"Density"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"Uniqueness"},"MatchDataProfileComponentValue":"00"},{"MatchDataProfileComponentTypeText":{"$":"National ID"},"MatchDataProfileComponentValue":"98"},{"MatchDataProfileComponentTypeText":{"$":"URL"},"MatchDataProfileComponentValue":"98"}]},"DisplaySequence":6}]}}}';
        	String piap_url = '{"OrderProductResponse":{"@ServiceVersionNumber":"4.0","TransactionDetail":{"ApplicationTransactionID":"ServiceGovernance-Samples","ServiceTransactionID":"Id-c61b3859bb659800025e60003fe0f705-2","TransactionTimestamp":"2004-02-15T00:14:14"},"TransactionResult":{"SeverityText":"Information","ResultID":"CM000","ResultText":"Success"},"OrderProductResponseDetail":{"InquiryDetail":{"DUNSNumber":"804735132","CountryISOAlpha2Code":"US"},"Product":{"DNBProductID":"PIAP_ENH","LanguageCode":39,"Organization":{"SubjectHeader":{"DUNSNumber":"804735132"},"Telecommunication":{"TelephoneNumber":{"TelecommunicationNumber":"(650) 555-0000","InternationalDialingCode":1}},"Location":{"PrimaryAddress":{"StreetAddressLine":[{"LineText":"492 Koller St"}],"PrimaryTownName":"San Francisco","CountryISOAlpha2Code":"US","TerritoryAbbreviatedName":"CA","PostalCode":"94110","TerritoryOfficialName":"California"}},"Events":{"LegalEvents":{"SuitsIndicator":true,"LiensIndicator":true,"JudgmentIndicator":true,"SuitInformation":{"SuitSummary":[{"OpenFilingsCount":1,"OpenFilingsAmount":{"$":750}}]},"LienInformation":{"LienSummary":{"OpenFilingsCount":1,"OpenFilingsAmount":{"$":500}}},"JudgmentInformation":{"JudgmentSummary":{"OpenFilingsCount":3,"OpenFilingsAmount":{"$":700}}},"ClaimsIndicator":true},"FinancingEvents":{"SecuredFilingsIndicator":true,"FinancingStatementFilingInformation":{"FinancialStatementFilingSummary":{"TotalFilingCount":2}}}},"OrganizationName":{"OrganizationPrimaryName":[{"OrganizationName":{"$":"Gorman Manufacturing Company, Inc."}}]},"OrganizationDetail":{"FamilyTreeMemberRole":[{"FamilyTreeMemberRoleText":{"@DNBCodeValue":12775,"$":"Global Ultimate"}},{"FamilyTreeMemberRoleText":{"@DNBCodeValue":12774,"$":"Domestic Ultimate"}},{"FamilyTreeMemberRoleText":{"@DNBCodeValue":12773,"$":"Parent"}},{"FamilyTreeMemberRoleText":{"@DNBCodeValue":12771,"$":"Headquarters"}}],"OperatingStatusText":{"@DNBCodeValue":9074,"$":"Active"}},"Assessment":{"DNBStandardRating":{"DNBStandardRating":"3A4"},"HistoryRatingText":{"@DNBCodeValue":9078,"$":"Clear"},"FinancialConditionText":{"@DNBCodeValue":415,"$":"Fair"}},"BusinessTrading":{"Purchaser":{"CurrentPaydexScore":{"TwentyFourMonthsPaydex":[{"PaydexScore":55,"PaydexDate":{"$":"2017-06"},"PaymentBehaviorText":"Days Beyond Terms","PaymentBehaviorDaysQuantity":26,"TotalPaymentExperiencesUsedCount":16}]},"PaydexScoreHistory":{"TwentyFourMonthsPaydex":[{"PaydexScore":55,"PaydexDate":{"$":"2017-05"}},{"PaydexScore":68,"PaydexDate":{"$":"2017-04"}},{"PaydexScore":75,"PaydexDate":{"$":"2017-03"}},{"PaydexScore":75,"PaydexDate":{"$":"2017-02"}},{"PaydexScore":75,"PaydexDate":{"$":"2017-01"}},{"PaydexScore":75,"PaydexDate":{"$":"2016-12"}},{"PaydexScore":76,"PaydexDate":{"$":"2016-11"}},{"PaydexScore":76,"PaydexDate":{"$":"2016-10"}},{"PaydexScore":78,"PaydexDate":{"$":"2016-09"}},{"PaydexScore":79,"PaydexDate":{"$":"2016-08"}},{"PaydexScore":76,"PaydexDate":{"$":"2016-07"}},{"PaydexScore":76,"PaydexDate":{"$":"2016-06"}},{"PaydexScore":75,"PaydexDate":{"$":"2016-05"}},{"PaydexScore":75,"PaydexDate":{"$":"2016-04"}},{"PaydexScore":75,"PaydexDate":{"$":"2016-03"}},{"PaydexScore":74,"PaydexDate":{"$":"2016-02"}},{"PaydexScore":74,"PaydexDate":{"$":"2016-01"}},{"PaydexScore":79,"PaydexDate":{"$":"2015-12"}},{"PaydexScore":79,"PaydexDate":{"$":"2015-11"}},{"PaydexScore":79,"PaydexDate":{"$":"2015-10"}},{"PaydexScore":78,"PaydexDate":{"$":"2015-09"}},{"PaydexScore":78,"PaydexDate":{"$":"2015-08"}},{"PaydexScore":78,"PaydexDate":{"$":"2015-07"}}]},"PurchaserDerivedData":[{"TradeDataYearMonth":{"$":"2017-05"},"ThreeMonthsDataCoveragePayments":{"PaymentPeriodSummary":[{"SummaryPeriod":"P3M","PaymentsWithHighCredit":{"SummarizedSlow":[{"DaysLowQuantity":1,"DaysHighQuantity":30,"SlowPercentage":33},{"DaysLowQuantity":31,"DaysHighQuantity":60,"SlowPercentage":4},{"DaysLowQuantity":61,"DaysHighQuantity":90,"SlowPercentage":26}]}}],"AccountsCount":30,"PastDueExperiencesCount":30,"MonthlyAveragePastDueTotalAmount":{"$":610951},"SummarizedPastDue":[{"DaysLowQuantity":30,"MonthlyAveragePastDueTotalAmount":{"$":308031}},{"DaysLowQuantity":60,"MonthlyAveragePastDueTotalAmount":{"$":118393}}]},"TwelveMonthsDataCoveragePayments":{"PaymentPeriodSummary":[{"SummaryPeriod":"P12M","PaymentsWithHighCredit":{"HighCreditTotalAmount":{"$":2245000},"HighCreditMaximumAmount":{"$":1000000},"AverageHighCreditAmount":{"$":140312}}}],"PastDueExperiencesCount":30,"SummarizedPastDue":[{"DaysLowQuantity":30,"MonthlyAveragePastDueTotalAmount":{"$":116601}},{"DaysLowQuantity":60,"MonthlyAveragePastDueTotalAmount":{"$":55181}},{"DaysLowQuantity":1},{"DaysLowQuantity":31},{"DaysLowQuantity":61},{"DaysLowQuantity":91},{"DaysLowQuantity":121},{"DaysLowQuantity":181}]},"TwentyFourMonthsDataCoveragePayments":{"PaymentPeriodSummary":[{"SummaryPeriod":"P24M","PaymentsWithHighCredit":{"ExperienceCount":16,"HighCreditMaximumAmount":{"@CurrencyISOAlpha3Code":"USD","$":1000000},"AverageHighCreditAmount":{"$":140312},"SlowExperienceCount":12,"SummarizedSlow":[{"DaysLowQuantity":1,"DaysHighQuantity":30,"SlowExperienceCount":5},{"DaysLowQuantity":31,"DaysHighQuantity":60,"SlowExperienceCount":3},{"DaysLowQuantity":61,"DaysHighQuantity":90,"SlowExperienceCount":4}],"PastDueTotalCount":150,"SlowNegativeExperienceCount":12,"PastDueTotalAmount":{"$":1208500}},"SatisfactoryPayments":{"ExperienceCount":4}}],"CurrentAccountsCount":85,"CurrentTotalAmount":{"$":1215000},"SlowExperienceCount":75,"SlowNegativeExperienceCount":75,"SummarizedPastDue":[{"DaysLowQuantity":30},{"DaysLowQuantity":60},{"DaysLowQuantity":1,"DaysHighQuantity":30,"ExperiencesCount":35,"TotalAmount":{"$":725000}},{"DaysLowQuantity":31,"DaysHighQuantity":60,"ExperiencesCount":20,"TotalAmount":{"$":117500}},{"DaysLowQuantity":61,"DaysHighQuantity":90,"ExperiencesCount":20,"TotalAmount":{"$":575000}},{"DaysLowQuantity":91,"DaysHighQuantity":120,"TotalAmount":{"$":0}},{"DaysLowQuantity":121,"DaysHighQuantity":180,"TotalAmount":{"$":0}},{"DaysLowQuantity":181,"TotalAmount":{"$":0}}]}},{"TradeDataYearMonth":{"$":"2017-05"},"OneMonthDataCoveragePayments":{"OwedTotalMaximumAmount":{"$":95252},"PastDueTotalMaximumAmount":{"$":95252},"PaymentPeriodSummary":[{"SummaryPeriod":"P12M","PaymentsWithHighCredit":{"HighCreditTotalAmount":{"$":1627348}}}],"SuppliersCount":3,"AccountsCount":30,"OwedTotalAmount":{"$":593821},"CurrentAccountsCount":23,"CurrentTotalAmount":{"$":115802},"SummarizedPastDue":[{"DaysLowQuantity":1,"DaysHighQuantity":30,"ExperiencesCount":17,"TotalAmount":{"$":82432}},{"DaysLowQuantity":31,"DaysHighQuantity":60,"ExperiencesCount":20,"TotalAmount":{"$":269583}},{"DaysLowQuantity":61,"DaysHighQuantity":90,"ExperiencesCount":21,"TotalAmount":{"$":126004}}]}},{"TradeDataYearMonth":{"$":"2017-04"},"OneMonthDataCoveragePayments":{"OwedTotalMaximumAmount":{"$":95252},"PastDueTotalMaximumAmount":{"$":95252},"PaymentPeriodSummary":[{"SummaryPeriod":"P12M","PaymentsWithHighCredit":{"HighCreditTotalAmount":{"$":1627348}}}],"SuppliersCount":3,"AccountsCount":30,"OwedTotalAmount":{"$":593821},"CurrentAccountsCount":23,"CurrentTotalAmount":{"$":115802},"SummarizedPastDue":[{"DaysLowQuantity":1,"DaysHighQuantity":30,"ExperiencesCount":17,"TotalAmount":{"$":82432}},{"DaysLowQuantity":31,"DaysHighQuantity":60,"ExperiencesCount":20,"TotalAmount":{"$":269583}},{"DaysLowQuantity":61,"DaysHighQuantity":90,"ExperiencesCount":21,"TotalAmount":{"$":126004}}]}},{"TradeDataYearMonth":{"$":"2017-03"},"OneMonthDataCoveragePayments":{"OwedTotalMaximumAmount":{"$":95252},"PastDueTotalMaximumAmount":{"$":95252},"PaymentPeriodSummary":[{"SummaryPeriod":"P12M","PaymentsWithHighCredit":{"HighCreditTotalAmount":{"$":1627348},"HighCreditMaximumAmount":{"$":207466},"AverageHighCreditAmount":{"$":54245}}}],"SuppliersCount":3,"AccountsCount":30,"OwedTotalAmount":{"$":593821},"CurrentAccountsCount":23,"CurrentTotalAmount":{"$":115802},"SummarizedPastDue":[{"DaysLowQuantity":1,"DaysHighQuantity":30,"ExperiencesCount":17,"TotalAmount":{"$":82432}},{"DaysLowQuantity":31,"DaysHighQuantity":60,"ExperiencesCount":20,"TotalAmount":{"$":269583}},{"DaysLowQuantity":61,"DaysHighQuantity":90,"ExperiencesCount":21,"TotalAmount":{"$":126004}}]}},{"TradeDataYearMonth":{"$":"2017-02"},"OneMonthDataCoveragePayments":{"OwedTotalMaximumAmount":{"$":118534},"PastDueTotalMaximumAmount":{"$":111560},"PaymentPeriodSummary":[{"SummaryPeriod":"P12M","PaymentsWithHighCredit":{"HighCreditTotalAmount":{"$":1683332},"HighCreditMaximumAmount":{"$":214020},"AverageHighCreditAmount":{"$":56111}}}],"SuppliersCount":3,"AccountsCount":30,"OwedTotalAmount":{"$":916691},"CurrentAccountsCount":24,"CurrentTotalAmount":{"$":172808},"SummarizedPastDue":[{"DaysLowQuantity":1,"DaysHighQuantity":30,"ExperiencesCount":26,"TotalAmount":{"$":523409}},{"DaysLowQuantity":31,"DaysHighQuantity":60,"ExperiencesCount":22,"TotalAmount":{"$":109693}},{"DaysLowQuantity":61,"DaysHighQuantity":90,"ExperiencesCount":15,"TotalAmount":{"$":110781}}]}},{"TradeDataYearMonth":{"$":"2017-01"},"OneMonthDataCoveragePayments":{"OwedTotalMaximumAmount":{"$":112534},"PastDueTotalMaximumAmount":{"$":25452},"PaymentPeriodSummary":[{"SummaryPeriod":"P12M","PaymentsWithHighCredit":{"HighCreditTotalAmount":{"$":1661946},"HighCreditMaximumAmount":{"$":214020},"AverageHighCreditAmount":{"$":55398}}}],"SuppliersCount":3,"AccountsCount":30,"OwedTotalAmount":{"$":826275},"CurrentAccountsCount":25,"CurrentTotalAmount":{"$":568586},"SummarizedPastDue":[{"DaysLowQuantity":1,"DaysHighQuantity":30,"ExperiencesCount":19,"TotalAmount":{"$":136349}},{"DaysLowQuantity":31,"DaysHighQuantity":60,"ExperiencesCount":13,"TotalAmount":{"$":71625}},{"DaysLowQuantity":61,"DaysHighQuantity":90,"ExperiencesCount":11,"TotalAmount":{"$":49715}}]}},{"TradeDataYearMonth":{"$":"2016-12"},"OneMonthDataCoveragePayments":{"OwedTotalMaximumAmount":{"$":129988},"PastDueTotalMaximumAmount":{"$":80449},"PaymentPeriodSummary":[{"SummaryPeriod":"P12M","PaymentsWithHighCredit":{"HighCreditTotalAmount":{"$":1721926},"HighCreditMaximumAmount":{"$":230155},"AverageHighCreditAmount":{"$":57398}}}],"SuppliersCount":3,"AccountsCount":30,"OwedTotalAmount":{"$":1117813},"CurrentAccountsCount":28,"CurrentTotalAmount":{"$":816276},"SummarizedPastDue":[{"DaysLowQuantity":1,"DaysHighQuantity":30,"ExperiencesCount":12,"TotalAmount":{"$":85355}},{"DaysLowQuantity":31,"DaysHighQuantity":60,"ExperiencesCount":13,"TotalAmount":{"$":54910}},{"DaysLowQuantity":61,"DaysHighQuantity":90,"ExperiencesCount":5,"TotalAmount":{"$":161272}}]}},{"TradeDataYearMonth":{"$":"2016-11"},"OneMonthDataCoveragePayments":{"OwedTotalMaximumAmount":{"$":118266},"PastDueTotalMaximumAmount":{"$":80449},"PaymentPeriodSummary":[{"SummaryPeriod":"P12M","PaymentsWithHighCredit":{"HighCreditTotalAmount":{"$":1731927},"HighCreditMaximumAmount":{"$":242111},"AverageHighCreditAmount":{"$":57731}}}],"SuppliersCount":3,"AccountsCount":30,"OwedTotalAmount":{"$":943275},"CurrentAccountsCount":27,"CurrentTotalAmount":{"$":776053},"SummarizedPastDue":[{"DaysLowQuantity":1,"DaysHighQuantity":30,"ExperiencesCount":4,"TotalAmount":{"$":8575}},{"DaysLowQuantity":31,"DaysHighQuantity":60,"ExperiencesCount":2,"TotalAmount":{"$":5653}},{"DaysLowQuantity":61,"DaysHighQuantity":90,"ExperiencesCount":4,"TotalAmount":{"$":152994}}]}},{"TradeDataYearMonth":{"$":"2016-10"},"OneMonthDataCoveragePayments":{"OwedTotalMaximumAmount":{"$":120144},"PastDueTotalMaximumAmount":{"$":80449},"PaymentPeriodSummary":[{"SummaryPeriod":"P12M","PaymentsWithHighCredit":{"HighCreditTotalAmount":{"$":1827197},"HighCreditMaximumAmount":{"$":277022},"AverageHighCreditAmount":{"$":60907}}}],"SuppliersCount":3,"AccountsCount":30,"OwedTotalAmount":{"$":972435},"CurrentAccountsCount":27,"CurrentTotalAmount":{"$":814493},"SummarizedPastDue":[{"DaysLowQuantity":31,"DaysHighQuantity":60,"ExperiencesCount":3,"TotalAmount":{"$":157942}}]}},{"TradeDataYearMonth":{"$":"2016-09"},"OneMonthDataCoveragePayments":{"OwedTotalMaximumAmount":{"$":119300},"PastDueTotalMaximumAmount":{"$":80449},"PaymentPeriodSummary":[{"SummaryPeriod":"P12M","PaymentsWithHighCredit":{"HighCreditTotalAmount":{"$":1884302},"HighCreditMaximumAmount":{"$":300156},"AverageHighCreditAmount":{"$":62810}}}],"SuppliersCount":3,"AccountsCount":30,"OwedTotalAmount":{"$":991915},"CurrentAccountsCount":27,"CurrentTotalAmount":{"$":833973},"SummarizedPastDue":[{"DaysLowQuantity":1,"DaysHighQuantity":30,"ExperiencesCount":3,"TotalAmount":{"$":157942}}]}},{"TradeDataYearMonth":{"$":"2016-08"},"OneMonthDataCoveragePayments":{"OwedTotalMaximumAmount":{"$":200116},"PastDueTotalMaximumAmount":{"$":0},"PaymentPeriodSummary":[{"SummaryPeriod":"P12M","PaymentsWithHighCredit":{"HighCreditTotalAmount":{"$":1945720},"HighCreditMaximumAmount":{"$":322222},"AverageHighCreditAmount":{"$":64857}}}],"SuppliersCount":3,"AccountsCount":30,"OwedTotalAmount":{"$":1119046},"CurrentAccountsCount":30,"CurrentTotalAmount":{"$":1119046}}},{"TradeDataYearMonth":{"$":"2016-07"},"OneMonthDataCoveragePayments":{"OwedTotalMaximumAmount":{"$":207466},"PastDueTotalMaximumAmount":{"$":6222},"PaymentPeriodSummary":[{"SummaryPeriod":"P12M","PaymentsWithHighCredit":{"HighCreditTotalAmount":{"$":2201242},"HighCreditMaximumAmount":{"$":352000},"AverageHighCreditAmount":{"$":73375}}}],"SuppliersCount":3,"AccountsCount":30,"OwedTotalAmount":{"$":1315686},"CurrentAccountsCount":29,"CurrentTotalAmount":{"$":1309464},"SummarizedPastDue":[{"DaysLowQuantity":61,"DaysHighQuantity":90,"ExperiencesCount":1,"TotalAmount":{"$":6222}}]}},{"TradeDataYearMonth":{"$":"2016-06"},"OneMonthDataCoveragePayments":{"OwedTotalMaximumAmount":{"$":200777},"PastDueTotalMaximumAmount":{"$":6222},"PaymentPeriodSummary":[{"SummaryPeriod":"P12M","PaymentsWithHighCredit":{"HighCreditTotalAmount":{"$":2280803},"HighCreditMaximumAmount":{"$":399007},"AverageHighCreditAmount":{"$":76027}}}],"SuppliersCount":3,"AccountsCount":30,"OwedTotalAmount":{"$":1353626},"CurrentAccountsCount":29,"CurrentTotalAmount":{"$":1347404},"SummarizedPastDue":[{"DaysLowQuantity":31,"DaysHighQuantity":60,"ExperiencesCount":1,"TotalAmount":{"$":6222}}]}}]},"PaydexScoreNorms":{"PaydexScoreIndustryNorms":[{"CalculationDate":{"$":"2017-04-07"},"PaydexMedianQuartileScore":74,"PaymentBehaviourText":"Days Beyond Terms","PaymentBehaviourDaysQuantity":9}]}}}},"InquiryReferenceDetail":{"CustomerReferenceText":["ServiceGovernance-Samples"],"CustomerBillingEndorsementText":"ServiceGovernance-Samples"}}}}';
        	String pbpr_url = '{"OrderProductResponse":{"@ServiceVersionNumber":"4.0","TransactionDetail":{"ServiceTransactionID":"Id-2f5b845b426a123836293368-2","TransactionTimestamp":"2018-08-27T16:12:32.166-04:00"},"TransactionResult":{"SeverityText":"Information","ResultID":"CM000","ResultText":"Success"},"OrderProductResponseDetail":{"InquiryDetail":{"DUNSNumber":"804735132","CountryISOAlpha2Code":"US"},"Product":{"DNBProductID":"PBPR_STD","Organization":{"SubjectHeader":{"DUNSNumber":"804735132"},"Telecommunication":{"TelephoneNumber":[{"TelecommunicationNumber":"(650) 555-0000","InternationalDialingCode":"1"}]},"Location":{"PrimaryAddress":[{"StreetAddressLine":[{"LineText":"492 Koller St"}],"PrimaryTownName":"San Francisco","CountryISOAlpha2Code":"US","TerritoryAbbreviatedName":"CA","PostalCode":"94110","TerritoryOfficialName":"California"}]},"OrganizationName":{"OrganizationPrimaryName":[{"OrganizationName":{"$":"Gorman Manufacturing Company, Inc."}}]},"OrganizationDetail":{"FamilyTreeMemberRole":[{"FamilyTreeMemberRoleText":{"@DNBCodeValue":12775,"$":"Global Ultimate"}},{"FamilyTreeMemberRoleText":{"@DNBCodeValue":12774,"$":"Domestic Ultimate"}},{"FamilyTreeMemberRoleText":{"@DNBCodeValue":12773,"$":"Parent"}}],"StandaloneOrganizationIndicator":false},"Assessment":{"CommercialCreditScore":[{"RawScore":438,"ClassScore":"5","NationalPercentile":9,"RiskIncidencePercentage":0.189,"ScoreCommentary":[{"CommentaryText":{"@DNBCodeValue":26171,"$":"Proportion of slow payments in recent months"}},{"CommentaryText":{"@DNBCodeValue":26173,"$":"Proportion of past due balances to total amount owing"}},{"CommentaryText":{"@DNBCodeValue":27021,"$":"Increase in proportion of delinquent payments in recent payment experiences"}},{"CommentaryText":{"@DNBCodeValue":26170,"$":"Higher risk industry based on delinquency rates for this industry"}},{"CommentaryText":{"@DNBCodeValue":19797,"$":"Evidence of open suits, liens, and judgments"}}],"ScoreDate":{"$":"2018-08-04"},"RiskIncidenceMinimumRangeRawScore":"401","RiskIncidenceMaximumRangeRawScore":"440"}],"CommercialCreditScoreNorms":[{"RiskIncidencePercentageIndustryNorm":[{"MedianValue":201}]}],"FinancialStressScore":[{"RawScore":1473,"ClassScore":"3","NationalPercentile":48,"RiskIncidencePercentage":0.0024,"ScoreCommentary":[{"CommentaryText":{"@DNBCodeValue":19823,"$":"Composite credit appraisal is rated limited"}},{"CommentaryText":{"@DNBCodeValue":19815,"$":"Low proportion of satisfactory payment experiences to total payment experiences"}},{"CommentaryText":{"@DNBCodeValue":19817,"$":"UCC Filings reported"}},{"CommentaryText":{"@DNBCodeValue":19811,"$":"High proportion of past due balances to total amount owing"}},{"CommentaryText":{"@DNBCodeValue":19822,"$":"Unstable Paydex over last 12 months"}}],"ScoreDate":{"$":"2018-07-29"}}],"DNBCreditLimitRecommendation":{"MaximumRecommendedLimitAmount":{"@CurrencyISOAlpha3Code":"USD","@UnitOfSize":"SingleUnits","$":90000}},"SupplierEvaluationRiskScore":[{"RiskScore":"2","ScoreCommentary":[{"CommentaryText":{"@DNBCodeValue":26158,"$":"Business belongs to an industry with above average risk of ceasing operations or becoming inactive"}},{"CommentaryText":{"@DNBCodeValue":26172,"$":"Proportion of slow payment experiences to total number of payment experiences reported"}},{"CommentaryText":{"@DNBCodeValue":26148,"$":"Total Liabilities to Net Worth influencing the score"}}]}],"AssessmentSummaryText":["Proportion of slow payments in recent months","Proportion of past due balances to total amount owing","Increase in proportion of delinquent payments in recent payment experiences","Higher risk industry based on delinquency rates for this industry","Total Liabilities to Net Worth influencing the score","Evidence of open suits, liens, and judgments"]}}}}}}';
            String viab_url = '{"OrderProductResponse":{"@ServiceVersionNumber":"4.0","TransactionDetail":{"ServiceTransactionID":"Id-afcbed4952ff48a302cb210e-2","TransactionTimestamp":"2014-02-15T05:59:49.225-05:00"},"TransactionResult":{"SeverityText":"Information","ResultID":"CM000","ResultText":"Success"},"OrderProductResponseDetail":{"InquiryDetail":{"DUNSNumber":"804735132","CountryISOAlpha2Code":"US"},"Product":{"DNBProductID":"VIAB_RAT","Organization":{"SubjectHeader":{"DUNSNumber":"804735132"},"Telecommunication":{"TelephoneNumber":[{"TelecommunicationNumber":"(650) 555-0000","InternationalDialingCode":"1"}]},"Location":{"PrimaryAddress":[{"StreetAddressLine":[{"LineText":"492 Koller St"}],"PrimaryTownName":"San Francisco","CountryISOAlpha2Code":"US","TerritoryAbbreviatedName":"CA","PostalCode":"94110","TerritoryOfficialName":"California"}]},"OrganizationName":{"OrganizationPrimaryName":[{"OrganizationName":{"$":"Gorman Manufacturing Company, Inc."}}]},"OrganizationDetail":{"FamilyTreeMemberRole":[{"FamilyTreeMemberRoleText":{"@DNBCodeValue":12775,"$":"Global Ultimate"}},{"FamilyTreeMemberRoleText":{"@DNBCodeValue":12773,"$":"Parent"}},{"FamilyTreeMemberRoleText":{"@DNBCodeValue":12774,"$":"Domestic Ultimate"}}]},"Assessment":{"DNBViabilityRating":{"DNBViabilityRating":"28AA","ViabilityScore":{"ClassScore":2,"RiskLevelDescription":{"@DNBCodeValue":13693,"$":"Low"},"BadRate":2,"ClassScoreIncidencePercentage":4,"OverallBadRate":14},"PortfolioComparisonScore":{"ClassScore":8,"RiskLevelDescription":{"@DNBCodeValue":13702,"$":"High"},"BadRate":2,"ClassScoreIncidencePercentage":4,"ModelSegmentDescription":{"@DNBCodeValue":26234,"$":"Available Financial Data"},"SegmentBadRate":0.6},"DataDepthDetail":{"DataDepthIndicator":"A","AssessmentText":["Rich Firmographics","Extensive Commercial Trading Activity","Comprehensive Financial Attributes"]},"OrganizationProfileDetail":{"OrganizationProfileRating":"A","FinancialDataAvailableIndicator":true,"TradeDataAvailabilityDetail":{"TradeDataAvailableIndicator":true,"AssessmentText":["Available: 3+Trade"]},"OrganizationSizeDetail":{"OrganizationSizeCategoryText":"Large","AssessmentText":["Large: Employees:50+ or Sales: $500K+"]},"YearsInBusinessDetail":{"YearsInBusinessCategoryText":"Established","AssessmentText":["Established: 5+"]}}}}},"ArchiveDetail":{"PortfolioAssetID":47651910}}}}}';

            if (req.getEndpoint().endsWith('Authentication/V2.0/')) {
                HTTPResponse res = new HTTPResponse();
                res.setBody(auth_url);
                res.setStatusCode(200);
                return res;
            } else if (req.getEndpoint().indexOf('Advanced&TerritoryName') != -1) {
                HTTPResponse res = new HTTPResponse();
                res.setBody(duns_url);
                res.setStatusCode(200);
                return res;
            } else if (req.getEndpoint().endsWith('PIAP_ENH')){
            	HTTPResponse res = new HTTPResponse();
                res.setBody(piap_url);
                res.setStatusCode(200);
                return res;
           	} else if (req.getEndpoint().endsWith('PBPR_STD')){
           		HTTPResponse res = new HTTPResponse();
                res.setBody(pbpr_url);
                res.setStatusCode(200);
                return res;
           	} else if (req.getEndpoint().endsWith('VIAB_RAT')){
                HTTPResponse res = new HTTPResponse();
                res.setBody(viab_url);
                res.setStatusCode(200);
                return res;
            } else {
                HTTPResponse res = new HTTPResponse();
                res.setBody('{}');
                res.setStatusCode(404);
                return res;
            }
        }
    }


	@isTest
	static void testDNBICallout() {

        DNB_Settings__c dnb_settings = new DNB_Settings__c();
        dnb_settings.Token_Last_Updated__c = null;
        dnb_settings.Token__c = null;
        dnb_settings.DNBIUser__c  = 'P10000012447FF5B955424C9F60A9717';
        dnb_settings.DNBIPwd__c = 'Samsara525';

        insert dnb_settings;

        User Owner = [Select Id FROM User WHERE Name LIKE 'Ron Saavedra'];

        Account a = new Account();
        a.Name = 'test1';
        a.Type = 'End Customer';
        a.Industry = 'Other';
        a.Organization_Size__c = '1 - 99';
        a.BillingStreet = '123 Main St, San Francisco CA, 94110';
        a.BillingState = 'California';
        a.BillingCountry = 'United States';
        a.BillingCity = 'San Francisco';
        a.BillingPostalCode = '94110';
        a.ShippingStreet = '123 Main St, San Francisco CA, 94110';
        a.ShippingState = 'California';
        a.ShippingCountry = 'United States';
        a.ShippingCity = 'San Francisco';
        a.ShippingPostalCode = '94110';
        insert a;
        Account b = new Account();
        b.Name = 'test2';
        b.Type = 'End Customer';
        b.Industry = 'Other';
        b.Organization_Size__c = '500 - 999';
        b.BillingStreet = '123 Main St, San Francisco CA, 94110';
        b.BillingState = 'California';
        b.BillingCountry = 'United States';
        b.BillingCity = 'San Francisco';
        b.BillingPostalCode = '94110';
        b.ShippingStreet = '123 Main St, San Francisco CA, 94110';
        b.ShippingState = 'California';
        b.ShippingCountry = 'United States';
        b.ShippingCity = 'San Francisco';
        b.ShippingPostalCode = '94110';
        insert b;
        Account c = new Account();
        c.Name = 'test3';
        c.Type = 'End Customer';
        c.Industry = 'Other';
        c.Organization_Size__c = '100 - 499';
        c.BillingStreet = '123 Main St, San Francisco CA, 94110';
        c.BillingState = 'California';
        c.BillingCountry = 'United States';
        c.BillingCity = 'San Francisco';
        c.BillingPostalCode = '94110';
        c.ShippingStreet = '123 Main St, San Francisco CA, 94110';
        c.ShippingState = 'California';
        c.ShippingCountry = 'United States';
        c.ShippingCity = 'San Francisco';
        c.ShippingPostalCode = '94110';
        insert c;

		List<Id> acctList = new List<Id>();
        acctList.add(a.Id);
        acctList.add(b.Id);
        acctList.add(c.Id);

        Test.startTest();

        Test.setMock(HttpCalloutMock.class, new Mock());

        DNBI_Integration.getDNBIFields(acctList);

        Test.stopTest();


        System.assertEquals(true,true);
       
    }

    /*@isTest
	static void testDNBITrigger() {
		//List<Opportunity> test_oppty = [Select Direct_Monthly__c from Opportunity where Id = '0061a00000PN4rg'];

        /*User thisUser = [ select Id from User where Id = :UserInfo.getUserId() ];
        System.runAs ( thisUser ) {

        List<UserRole> mm = [Select Id from UserRole where Name Like '%MM%'];

        User u = new User(UserRoleId = mm[0].Id);
        u.Username = 'nishant.raman@samsara.com';
        u.LastName = 'Raman';
        u.Email = 'nishant.raman@samsara.com';
        u.Alias = 'nrama';
        u.CommunityNickname = 'nishant.rama';
        u.TimeZoneSidKey = 'America/Los_Angeles';
        u.LocaleSidKey = 'en_US';
        u.EmailEncodingKey = 'ISO-8859-1';
        u.ProfileId = '00e1a000000dxEqAAI';
        u.LanguageLocaleKey = 'en_US'; 
        insert u;

        Account a = new Account();
        a.Name = 'test1';
        a.Type = 'End Customer';
        a.Industry = 'Other';
        a.Organization_Size__c = '1 - 99';
        a.BillingStreet = '123 Main St, San Francisco CA, 94110';
        a.BillingState = 'California';
        a.BillingCountry = 'United States';
        a.BillingCity = 'San Francisco';
        a.BillingPostalCode = '94110';
        a.ShippingStreet = '123 Main St, San Francisco CA, 94110';
        a.ShippingState = 'California';
        a.ShippingCountry = 'United States';
        a.ShippingCity = 'San Francisco';
        a.ShippingPostalCode = '94110';
        //a.OwnerId = u.Id;
        a.DNBI_Data_Available__c = false;
        insert a;


        Opportunity oppty = new Opportunity(AccountId = a.Id, Name = 'Rev', CloseDate = System.today() + 90, StageName = 'Incubate');

        oppty.Probability = 40;
        oppty.License_Term__c = 1;
        oppty.Amount = 100000;

		insert oppty;

		System.assertEquals(true,true);
        //}
        
	}*/

    /*@isTest
    static void testDNBIWrappers(){

        DNBI_PBPR_STD test1 = DNBI_PBPR_STD.parse();
        DNBI_VIAB_RAT test2 = DNBI_VIAB_RAT.parse();
        DNBI_PIAP_ENH test3 = DNBI_PIAP_ENH.parse());

        System.assertEquals(true,true);

    }*/

}