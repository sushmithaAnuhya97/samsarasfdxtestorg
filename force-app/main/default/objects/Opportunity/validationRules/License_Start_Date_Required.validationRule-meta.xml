<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>License_Start_Date_Required</fullName>
    <active>true</active>
    <description>//GTMS-23000 Exception if there is WASD populated</description>
    <errorConditionFormula>AND(
    Adjust_License_Start_Date__c, 
    NOT(ISCHANGED(Bypass_Validation_Rule_DateTime__c)),
    NOT($Permission.Validation_Rule_Exemption),
    NOT($Permission.NetSuite_Service_User_Permission),
    OR(AND(
   ISBLANK(SBQQ__RenewedContract__r.Weighted_Average_Start_Date__c),
    OR(CloseDate &lt; TODAY(),
         License_Start_Date__c != CloseDate)),
       ISNULL(License_Start_Date__c)
    ),
    NOT(ISPICKVAL (StageName, &apos;Closed Lost&apos;)),
    NOT(ISPICKVAL (StageName, &apos;Closed Won&apos;)),
    NOT(CONTAINS($Label.Corpweb_SFDC_Robot, $User.X18_Digit_User_ID__c)),
				NOT(CONTAINS($Label.SystemsAutomationRobotUserId,$User.X18_Digit_User_ID__c))
)</errorConditionFormula>
    <errorMessage>Please ensure (1) &apos;Close Date&apos; = &apos;License Start Date&apos; and (2) both dates are in the future. If not, uncheck the &apos;Adjust License Start Date&apos; box.</errorMessage>
</ValidationRule>
