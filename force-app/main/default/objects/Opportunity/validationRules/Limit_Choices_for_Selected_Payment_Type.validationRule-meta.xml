<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Limit_Choices_for_Selected_Payment_Type</fullName>
    <active>false</active>
    <description>GTMS-2635 (01/08/21)
GTMS-2656 (01/12/21)
Added Validation rule exemption - Tommy 1/18
GTMS-2718(01/26/21)</description>
    <errorConditionFormula>AND(
NOT( $Permission.Validation_Rule_Exemption),
$User.Id != &quot;0051a000002JKtR&quot;, /* Exclude NetsuiteBot user */
ISPICKVAL(Type, &quot;Revenue Opportunity&quot;), NOT(CONTAINS(Owner_Role_Copy__c,&quot;IND&quot;)),
NOT(CONTAINS(Owner_Role_Copy__c,&quot;AE1&quot;)),
OR(
AND(
NOT(ISCLONE()),
NOT(ISPICKVAL(Configuration_Segment__c, &quot;&quot;)),
ISPICKVAL(Selected_Payment_Type__c, &quot;None&quot;),
NOT(ISBLANK(SBQQ__PrimaryQuote__c))
),
OR(
AND(
Account_Approved_Payment_Type__c = &quot;Upfront Payments&quot;,
ISPICKVAL(Configuration_Segment__c, &quot;Non Express&quot;),
NOT(ISPICKVAL(Selected_Payment_Type__c,&quot;&quot;)),
NOT(ISPICKVAL(Selected_Payment_Type__c,&quot;Upfront Payments&quot;))
),
AND(
Account_Approved_Payment_Type__c = &quot;Upfront Payments&quot;,
ISPICKVAL(Configuration_Segment__c, &quot;Express&quot;),
NOT(ISPICKVAL(Selected_Payment_Type__c,&quot;Direct Monthly&quot;)),
ISPICKVAL(Selected_Payment_Type__c,&quot;Direct Annual&quot;)
)
),
AND(
Account_Approved_Payment_Type__c = &quot;Direct Annual&quot;,
ISPICKVAL(Selected_Payment_Type__c,&quot;Direct Monthly&quot;),
ISPICKVAL(Configuration_Segment__c, &quot;Non Express&quot;)
)
)
)</errorConditionFormula>
    <errorDisplayField>Express_Agreement_Accepted__c</errorDisplayField>
    <errorMessage>Customer has not been approved for this payment type, please choose another or apply for monthly payments from the account</errorMessage>
</ValidationRule>
