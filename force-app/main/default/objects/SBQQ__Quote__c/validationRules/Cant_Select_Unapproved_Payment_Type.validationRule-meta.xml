<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Cant_Select_Unapproved_Payment_Type</fullName>
    <active>false</active>
    <errorConditionFormula>AND(
    NOT($Setup.Global_Automation_Settings__c.Skip_Validation_Rule__c),
    ISPICKVAL(Configuration_Segment__c, &apos;Non Express&apos;),
    $Profile.Name &lt;&gt; &quot;System Administrator API&quot;,
    NOT($Permission.Validation_Rule_Exemption),
    Associated_Opportunity_Type__c &lt;&gt; &quot;Remorse Refund&quot;,
    NOT(ISCLONE()),
    OR(
        
        AND(
            Approved_Payment_Type__c = &quot;Direct Quarterly&quot;,
            ISPICKVAL(Selected_Payment_Type__c,&quot;Direct Monthly&quot;)
        ),
        AND(
            Approved_Payment_Type__c = &quot;Upfront Payments&quot;,
            OR(
                ISPICKVAL(Selected_Payment_Type__c,&quot;Direct Monthly&quot;),
                ISPICKVAL(Selected_Payment_Type__c,&quot;Direct Quarterly&quot;),
                ISPICKVAL(Selected_Payment_Type__c,&quot;Direct Annual&quot;)
            )
        ),
        AND(
            Approved_Payment_Type__c = &quot;Direct Annual&quot;,
            OR( 
                ISPICKVAL(Selected_Payment_Type__c,&quot;Direct Monthly&quot;), 
                ISPICKVAL(Selected_Payment_Type__c,&quot;Direct Quarterly&quot;)
            )
        )
    )
)</errorConditionFormula>
    <errorDisplayField>of_Accessories__c</errorDisplayField>
    <errorMessage>Customer has not been approved for this payment type, please choose another or apply for monthly payments from the account</errorMessage>
</ValidationRule>
