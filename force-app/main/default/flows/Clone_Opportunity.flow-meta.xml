<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>49.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>All_in_One</name>
        <label>All in One</label>
        <locationX>1011</locationX>
        <locationY>492</locationY>
        <assignmentItems>
            <assignToReference>SOC_NewOLI</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>NewOLI</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Extract</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Value_to_new_Record</name>
        <label>Assign Value to new Record</label>
        <locationX>1002</locationX>
        <locationY>218</locationY>
        <assignmentItems>
            <assignToReference>NewOLI.OpportunityId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>VarT_NewOpportunityId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewOLI.PricebookEntryId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LineItem.PricebookEntryId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewOLI.UnitPrice</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LineItem.UnitPrice</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewOLI.Quantity</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LineItem.Quantity</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewOLI.License_Term_Copy__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LineItem.License_Term_Copy__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewOLI.NS_Unit_Rate__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LineItem.NS_Unit_Rate__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>NewOLI.Ship_From_Location__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>LineItem.Ship_From_Location__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>All_in_One</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Check_SOC_Size</name>
        <label>Check SOC Size</label>
        <locationX>822</locationX>
        <locationY>50</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Not_Null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SOC_OLI</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Extract</targetReference>
            </connector>
            <label>Not Null</label>
        </rules>
    </decisions>
    <interviewLabel>Clone Opportunity {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Clone Opportunity</label>
    <loops>
        <name>Extract</name>
        <label>Extract</label>
        <locationX>837</locationX>
        <locationY>255</locationY>
        <assignNextValueToReference>LineItem</assignNextValueToReference>
        <collectionReference>SOC_OLI</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_Value_to_new_Record</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_New_OLI</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_New_OLI</name>
        <label>Create New OLI</label>
        <locationX>612</locationX>
        <locationY>467</locationY>
        <inputReference>SOC_NewOLI</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_New_Opp</name>
        <label>Create New Opp</label>
        <locationX>651</locationX>
        <locationY>39</locationY>
        <assignRecordIdToReference>VarT_NewOpportunityId</assignRecordIdToReference>
        <connector>
            <targetReference>Check_SOC_Size</targetReference>
        </connector>
        <inputAssignments>
            <field>AccountId</field>
            <value>
                <elementReference>oppRecord.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>All_Serial_Numbers__c</field>
            <value>
                <elementReference>oppRecord.All_Serial_Numbers__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Claim_Number__c</field>
            <value>
                <elementReference>oppRecord.Claim_Number__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CloseDate</field>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <stringValue>Clone - {!oppRecord.Name}</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>NextStep</field>
            <value>
                <elementReference>oppRecord.NextStep</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Next_Step_Due_Date__c</field>
            <value>
                <elementReference>oppRecord.Next_Step_Due_Date__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Notes__c</field>
            <value>
                <elementReference>oppRecord.Notes__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Order_Admin__c</field>
            <value>
                <elementReference>oppRecord.Order_Admin__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>oppRecord.OwnerId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Pricebook2Id</field>
            <value>
                <elementReference>oppRecord.Pricebook2Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Probability</field>
            <value>
                <elementReference>oppRecord.Probability</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Qualified_Date__c</field>
            <value>
                <elementReference>oppRecord.Qualified_Date__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <elementReference>oppRecord.RecordTypeId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Related_Contact__c</field>
            <value>
                <elementReference>oppRecord.Related_Contact__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Ship_From_Location__c</field>
            <value>
                <elementReference>oppRecord.Ship_From_Location__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Shipping_Address_NEW__c</field>
            <value>
                <elementReference>oppRecord.Shipping_Address_NEW__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Shipping_Instructions__c</field>
            <value>
                <elementReference>oppRecord.Shipping_Instructions__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Shipping_Method__c</field>
            <value>
                <elementReference>oppRecord.Shipping_Method__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>StageName</field>
            <value>
                <elementReference>oppRecord.StageName</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Tracking_Number__c</field>
            <value>
                <elementReference>oppRecord.Tracking_Number__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Trial_Status__c</field>
            <value>
                <elementReference>oppRecord.Trial_Status__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type</field>
            <value>
                <elementReference>oppRecord.Type</elementReference>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordCreates>
    <recordLookups>
        <name>Existing_Opp</name>
        <label>Existing Opp</label>
        <locationX>390</locationX>
        <locationY>66</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>opp</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OpportunityId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>VarT_OldOpportunityId</elementReference>
            </value>
        </filters>
        <object>OpportunityLineItem</object>
        <outputReference>SOC_OLI</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>OpportunityId</queriedFields>
        <queriedFields>Quantity</queriedFields>
        <queriedFields>UnitPrice</queriedFields>
        <queriedFields>PricebookEntryId</queriedFields>
        <queriedFields>Product2Id</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>Ship_From_Location__c</queriedFields>
        <queriedFields>TotalPrice</queriedFields>
        <queriedFields>License_Term_Copy__c</queriedFields>
        <queriedFields>NS_Unit_Rate__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>opp</name>
        <label>opp</label>
        <locationX>504</locationX>
        <locationY>65</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Create_New_Opp</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>VarT_OldOpportunityId</elementReference>
            </value>
        </filters>
        <object>Opportunity</object>
        <outputReference>oppRecord</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>AccountId</queriedFields>
        <queriedFields>Amount</queriedFields>
        <queriedFields>ContactId</queriedFields>
        <queriedFields>CloseDate</queriedFields>
        <queriedFields>Description</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>Pricebook2Id</queriedFields>
        <queriedFields>Type</queriedFields>
        <queriedFields>Qualified_Date__c</queriedFields>
        <queriedFields>Order_Admin__c</queriedFields>
        <queriedFields>StageName</queriedFields>
        <queriedFields>Trial_Status__c</queriedFields>
        <queriedFields>Related_Contact__c</queriedFields>
        <queriedFields>Cables_Selection_Link__c</queriedFields>
        <queriedFields>Next_Steps__c</queriedFields>
        <queriedFields>Notes__c</queriedFields>
        <queriedFields>Shipping_Address_NEW__c</queriedFields>
        <queriedFields>Shipping_Zone__c</queriedFields>
        <queriedFields>All_Serial_Numbers__c</queriedFields>
        <queriedFields>RecordTypeId</queriedFields>
        <queriedFields>Ship_From_Location__c</queriedFields>
        <queriedFields>Shipping_Method__c</queriedFields>
        <queriedFields>Order_Number__c</queriedFields>
        <queriedFields>Tracking_Number__c</queriedFields>
        <queriedFields>of_HW_Products__c</queriedFields>
        <queriedFields>Next_Step_Due_Date__c</queriedFields>
        <queriedFields>Shipping_Instructions__c</queriedFields>
        <queriedFields>Claim_Number__c</queriedFields>
        <queriedFields>Reseller__c</queriedFields>
        <queriedFields>LeadSource</queriedFields>
        <queriedFields>Account_Lifetime_Purchases__c</queriedFields>
        <queriedFields>Return_Opportunity_Term__c</queriedFields>
        <queriedFields>New_Shipping_Email__c</queriedFields>
        <queriedFields>OwnerId</queriedFields>
        <queriedFields>NextStep</queriedFields>
        <queriedFields>Probability</queriedFields>
    </recordLookups>
    <start>
        <locationX>50</locationX>
        <locationY>50</locationY>
        <connector>
            <targetReference>Existing_Opp</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>LineItem</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>OpportunityLineItem</objectType>
    </variables>
    <variables>
        <name>NewOLI</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>OpportunityLineItem</objectType>
    </variables>
    <variables>
        <name>oppRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <name>SOC_NewOLI</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>OpportunityLineItem</objectType>
    </variables>
    <variables>
        <name>SOC_OLI</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>OpportunityLineItem</objectType>
    </variables>
    <variables>
        <name>VarT_AccountId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>VarT_NewOpportunityId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>VarT_OldOpportunityId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>VarT_OldOpportunityName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>VarT_PricebookId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
</Flow>
