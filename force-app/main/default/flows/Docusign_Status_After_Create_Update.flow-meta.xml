<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Send_Approval_Email</name>
        <label>Send Approval Email</label>
        <locationX>50</locationX>
        <locationY>755</locationY>
        <actionName>Opportunity.Docusign_SCL_Approval_Alert</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Update_Opportunity_Field_To_Signed</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.dsfs__Opportunity__c</elementReference>
            </value>
        </inputParameters>
        <nameSegment>Opportunity.Docusign_SCL_Approval_Alert</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_Email</name>
        <label>Send Email</label>
        <locationX>534</locationX>
        <locationY>2411</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailAddresses</name>
            <value>
                <elementReference>ListOfEmailRecipient</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <elementReference>SubjectInfo</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>EmailTemplateBody</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sendRichBody</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>relatedRecordId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <actionCalls>
        <name>Send_Rejection_Email</name>
        <label>Send Rejection Email</label>
        <locationX>402</locationX>
        <locationY>1163</locationY>
        <actionName>Opportunity.Docusign_SCL_Rejection_Alert</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Check_SCL_Status</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.dsfs__Opportunity__c</elementReference>
            </value>
        </inputParameters>
        <nameSegment>Opportunity.Docusign_SCL_Rejection_Alert</nameSegment>
        <offset>0</offset>
    </actionCalls>
    <apiVersion>55.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>assign_oppty_primary_quote_id</name>
        <label>assign oppty primary quote id</label>
        <locationX>798</locationX>
        <locationY>1679</locationY>
        <assignmentItems>
            <assignToReference>quoteId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.dsfs__Opportunity__r.SBQQ__PrimaryQuote__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Quote_Line</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>assign_quote_id</name>
        <label>assign quote id</label>
        <locationX>534</locationX>
        <locationY>1787</locationY>
        <assignmentItems>
            <assignToReference>quoteId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>get_oppty_related_quotes.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Quote_Line</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Data_Share_Status_Signed</name>
        <label>Set Data Share Status Signed</label>
        <locationX>754</locationX>
        <locationY>647</locationY>
        <assignmentItems>
            <assignToReference>DataShareStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Signed</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Account_Data_Share_Status</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Data_Sign_Status_Voided</name>
        <label>Set Data Sign Status Voided</label>
        <locationX>1018</locationX>
        <locationY>647</locationY>
        <assignmentItems>
            <assignToReference>DataShareStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Voided</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Update_Account_Data_Share_Status</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_LOI_Status_to_Signed</name>
        <label>Set LOI Status to Signed</label>
        <locationX>50</locationX>
        <locationY>647</locationY>
        <assignmentItems>
            <assignToReference>LOIStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Signed</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Send_Approval_Email</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_LOI_Status_to_Voided</name>
        <label>Set LOI Status to Voided</label>
        <locationX>402</locationX>
        <locationY>1055</locationY>
        <assignmentItems>
            <assignToReference>LOIStatus</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Voided</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Send_Rejection_Email</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Check_Docusign_Status_and_other_related_field</name>
        <label>Check Docusign Status and other related field</label>
        <locationX>2118</locationX>
        <locationY>323</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Is_Envelope_Status_Completed_or_Voided</name>
            <conditionLogic>(1 OR 2) AND (3 OR 4)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.dsfs__Envelope_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Completed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Envelope_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Voided</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Envelope_Status__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_Subject_Value</targetReference>
            </connector>
            <label>Is Envelope Status Completed or Voided</label>
        </rules>
        <rules>
            <name>Is_Envelope_Status_Sent_SCL</name>
            <conditionLogic>1 AND (2 OR 3) AND 4</conditionLogic>
            <conditions>
                <leftValueReference>$Record.dsfs__Envelope_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Sent</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Envelope_Status__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Subject__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Subsidy Commitment Letter</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Opportunity</targetReference>
            </connector>
            <label>Is Envelope Status Sent - SCL</label>
        </rules>
        <rules>
            <name>Is_Envelope_Status_Sent_Request_Buyout_Doc</name>
            <conditionLogic>(1 OR 2) AND 3 AND 4</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Envelope_Status__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Envelope_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Sent</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Subject__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Request Buyout Document</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Opportunity_Rec</targetReference>
            </connector>
            <label>Is Envelope Status Sent - Request Buyout Doc</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_for_Opportunity_Primary_Quote_Id</name>
        <label>Check for Opportunity Primary Quote Id</label>
        <locationX>666</locationX>
        <locationY>1571</locationY>
        <defaultConnector>
            <targetReference>assign_oppty_primary_quote_id</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>does_not_have_Opportunity_Primary_Quote</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.dsfs__Opportunity__r.SBQQ__PrimaryQuote__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>get_oppty_related_quotes</targetReference>
            </connector>
            <label>does not have Opportunity Primary Quote</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Get_Not_Voided_0</name>
        <label>Check Get Not Voided &gt; 0</label>
        <locationX>402</locationX>
        <locationY>755</locationY>
        <defaultConnector>
            <targetReference>Update_Opportunity_Field_To_Voided</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Is_Greater_than_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Docusign_that_is_not_Voided</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_LOI_Status_to_Voided</targetReference>
            </connector>
            <label>Is Greater than 0</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Opportunity_Field_Values</name>
        <label>Check Opportunity Field Values</label>
        <locationX>666</locationX>
        <locationY>539</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Check_Insurance_Partner_LOI_Status_Completed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.dsfs__Opportunity__r.Insurance_Partner__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Opportunity__r.LOI_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Sent</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Envelope_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Completed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Envelope_Status__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Opportunity__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_LOI_Status_to_Signed</targetReference>
            </connector>
            <label>Check Insurance Partner/LOI Status/Completed</label>
        </rules>
        <rules>
            <name>Check_Insurance_Partner_LOI_Status_Voided</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.dsfs__Opportunity__r.Insurance_Partner__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Opportunity__r.LOI_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Sent</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Envelope_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Voided</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Envelope_Status__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Opportunity__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Docusign_that_is_not_Voided</targetReference>
            </connector>
            <label>Check Insurance Partner/LOI Status/Voided</label>
        </rules>
        <rules>
            <name>Check_Account_Has_value_opportunity_is_blank_status_completed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.dsfs__Company__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Opportunity__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Envelope_Status__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Envelope_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Completed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Data_Share_Status_Signed</targetReference>
            </connector>
            <label>Check Account Has value, opportunity is blank, status completed</label>
        </rules>
        <rules>
            <name>Check_Account_Has_value_opportunity_is_blank_status_voided</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.dsfs__Company__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Opportunity__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Envelope_Status__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.dsfs__Envelope_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Voided</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Data_Sign_Status_Voided</targetReference>
            </connector>
            <label>Check Account Has value, opportunity is blank, status voided</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Quote_LIne</name>
        <label>Check Quote LIne</label>
        <locationX>666</locationX>
        <locationY>2087</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>has_INS_SUBSIDY</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Quote_Line</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Delete_INS_SUBSIDY_Quote_Line</targetReference>
            </connector>
            <label>has INS-SUBSIDY</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_SCL_Status</name>
        <label>Check SCL Status</label>
        <locationX>666</locationX>
        <locationY>1355</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Is_SCL_Status_Signed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>LOIStatus</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Signed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Records_2</targetReference>
            </connector>
            <label>Is SCL Status Signed</label>
        </rules>
        <rules>
            <name>Is_SCL_Status_Voided</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>LOIStatus</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Voided</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Records_3</targetReference>
            </connector>
            <label>Is SCL Status Voided</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Subject_Value</name>
        <label>Check If Subject Contains</label>
        <locationX>1370</locationX>
        <locationY>431</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Subsidy_Commitment_Letter</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.dsfs__Subject__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Subsidy Commitment Letter</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Check_Opportunity_Field_Values</targetReference>
            </connector>
            <label>Subsidy Commitment Letter</label>
        </rules>
        <rules>
            <name>Request_Buyout_Documents</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.dsfs__Subject__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Request Buyout Document</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Request_Buyout_Documents_Status</targetReference>
            </connector>
            <label>Request Buyout Documents</label>
        </rules>
    </decisions>
    <decisions>
        <name>Request_Buyout_Documents_Status</name>
        <label>Request Buyout Documents Status</label>
        <locationX>1678</locationX>
        <locationY>539</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>is_completed3</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.dsfs__Envelope_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Completed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Opportunity_Rec2</targetReference>
            </connector>
            <label>is completed</label>
        </rules>
    </decisions>
    <environments>Default</environments>
    <formulas>
        <name>ListOfEmailRecipient</name>
        <dataType>String</dataType>
        <expression>{!$Record.dsfs__Opportunity__r.Owner.Email} &amp; &apos;;&apos; &amp; {!$Record.dsfs__Opportunity__r.Insurance_Partner__r.Owner.Email} &amp; &apos;;agamani.parida@samsara.com&apos;</expression>
    </formulas>
    <formulas>
        <name>SubjectInfo</name>
        <dataType>String</dataType>
        <expression>&apos;Subject: DSA Rejected by &apos; &amp; {!$Record.dsfs__Company__r.Name} &amp; &apos; or &apos; &amp; {!$Record.dsfs__Contact__r.Name}</expression>
    </formulas>
    <interviewLabel>Docusign Status - After Create/Update {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Docusign Status - After Create/Update</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordDeletes>
        <name>Delete_INS_SUBSIDY_Quote_Line</name>
        <label>Delete INS-SUBSIDY Quote Line</label>
        <locationX>534</locationX>
        <locationY>2195</locationY>
        <connector>
            <targetReference>get_opportunity_details</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SBQQ__Quote__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.dsfs__Opportunity__r.SBQQ__PrimaryQuote__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>SBQQ__ProductCode__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>INS-SUBSIDY</stringValue>
            </value>
        </filters>
        <object>SBQQ__QuoteLine__c</object>
    </recordDeletes>
    <recordLookups>
        <name>Get_Docusign_that_is_not_Voided</name>
        <label>Get Docusign that is not Voided</label>
        <locationX>402</locationX>
        <locationY>647</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Get_Not_Voided_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>dsfs__Opportunity__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.dsfs__Opportunity__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>dsfs__Envelope_Status__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Voided</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>dsfs__DocuSign_Status__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_opportunity_details</name>
        <label>get opportunity details</label>
        <locationX>534</locationX>
        <locationY>2303</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Send_Email</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.dsfs__Opportunity__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Opportunity</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>get_oppty_related_quotes</name>
        <label>get oppty related quotes</label>
        <locationX>534</locationX>
        <locationY>1679</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>assign_quote_id</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SBQQ__Opportunity2__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.dsfs__Opportunity__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>SBQQ__Quote__c</object>
        <sortField>CreatedDate</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Quote_Line</name>
        <label>Get Quote Line</label>
        <locationX>666</locationX>
        <locationY>1979</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Quote_LIne</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SBQQ__Quote__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>quoteId</elementReference>
            </value>
        </filters>
        <filters>
            <field>SBQQ__ProductCode__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>INS-SUBSIDY</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>SBQQ__QuoteLine__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_Account_Data_Share_Status</name>
        <label>Update Account Data Share Status</label>
        <locationX>754</locationX>
        <locationY>755</locationY>
        <inputAssignments>
            <field>Datashare_Status__c</field>
            <value>
                <elementReference>DataShareStatus</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record.dsfs__Company__r</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Opportunity</name>
        <label>Update Opportunity</label>
        <locationX>2338</locationX>
        <locationY>431</locationY>
        <inputAssignments>
            <field>LOI_Status__c</field>
            <value>
                <stringValue>Sent</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SCL_Status_Sent_Date__c</field>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record.dsfs__Opportunity__r</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Opportunity_Field_To_Signed</name>
        <label>Update Opportunity Field To Signed</label>
        <locationX>50</locationX>
        <locationY>863</locationY>
        <connector>
            <targetReference>Check_SCL_Status</targetReference>
        </connector>
        <inputAssignments>
            <field>LOI_Status__c</field>
            <value>
                <stringValue>Signed</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record.dsfs__Opportunity__r</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Opportunity_Field_To_Voided</name>
        <label>Update Opportunity Field To Voided</label>
        <locationX>490</locationX>
        <locationY>863</locationY>
        <connector>
            <targetReference>Set_LOI_Status_to_Voided</targetReference>
        </connector>
        <inputAssignments>
            <field>LOI_Status__c</field>
            <value>
                <stringValue>Voided</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record.dsfs__Opportunity__r</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Opportunity_Rec</name>
        <label>Update Opportunity Rec</label>
        <locationX>2602</locationX>
        <locationY>431</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.dsfs__Opportunity__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Buyout_Stage__c</field>
            <value>
                <stringValue>Document Request Sent</stringValue>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Opportunity_Rec2</name>
        <label>Update Opportunity Rec</label>
        <locationX>1546</locationX>
        <locationY>647</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.dsfs__Opportunity__c</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Buyout_Stage__c</field>
            <value>
                <stringValue>Document Under Review</stringValue>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Records_2</name>
        <label>Update Records 2</label>
        <locationX>270</locationX>
        <locationY>1463</locationY>
        <inputAssignments>
            <field>Datashare_Status__c</field>
            <value>
                <stringValue>Signed</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record.dsfs__Company__r</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Records_3</name>
        <label>Update Records 3</label>
        <locationX>666</locationX>
        <locationY>1463</locationY>
        <connector>
            <targetReference>Check_for_Opportunity_Primary_Quote_Id</targetReference>
        </connector>
        <inputAssignments>
            <field>Datashare_Status__c</field>
            <value>
                <stringValue>Voided</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record.dsfs__Company__r</inputReference>
    </recordUpdates>
    <start>
        <locationX>1992</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Check_Docusign_Status_and_other_related_field</targetReference>
        </connector>
        <object>dsfs__DocuSign_Status__c</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <textTemplates>
        <name>EmailTemplateBody</name>
        <isViewedAsPlainText>false</isViewedAsPlainText>
        <text>&lt;p&gt;The customer, {!$Record.dsfs__Company__r.Name}, has rejected the Datashare Agreement for {!get_opportunity_details.Finance_Partner__r.Name} Per our policies, this means the customer is not eligible for participation in the Subsidy program and the related SKU has been removed from their opportunity.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Please take the appropriate steps to advise the Partner and the Customer of this outcome and next steps to continue without the subsidy in place.&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Regards,&amp;nbsp;&lt;/p&gt;&lt;p&gt;Samsara Partnership Team&lt;/p&gt;</text>
    </textTemplates>
    <variables>
        <name>DataShareStatus</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>LOIStatus</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>quoteCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>quoteId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
