<?xml version="1.0" encoding="UTF-8"?>
<Workflow xmlns="http://soap.sforce.com/2006/04/metadata">
    <fieldUpdates>
        <fullName>Case_Status_Pending_Customer</fullName>
        <field>Status</field>
        <literalValue>Pending-Customer</literalValue>
        <name>Case Status - Pending Customer</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
        <targetObject>ParentId</targetObject>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Status_to_PendingSam</fullName>
        <field>Status</field>
        <literalValue>Pending-Samsara</literalValue>
        <name>Status to PendingSam</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
        <targetObject>ParentId</targetObject>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Status_to_Pending_Samsara</fullName>
        <field>Status</field>
        <literalValue>Pending-Samsara</literalValue>
        <name>Status to Pending Samsara</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
        <targetObject>ParentId</targetObject>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_case_status_to_Samsara_pending</fullName>
        <field>Status</field>
        <literalValue>Pending-Samsara</literalValue>
        <name>Update case status to Samsara pending</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Literal</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
        <targetObject>ParentId</targetObject>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_last_contact_time</fullName>
        <field>Last_Customer_Communication__c</field>
        <formula>now()</formula>
        <name>Update last contact time</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
        <targetObject>ParentId</targetObject>
    </fieldUpdates>
    <fieldUpdates>
        <fullName>Update_last_received_email</fullName>
        <field>Last_Received_Email__c</field>
        <formula>now()</formula>
        <name>Update last received email</name>
        <notifyAssignee>false</notifyAssignee>
        <operation>Formula</operation>
        <protected>false</protected>
        <reevaluateOnChange>false</reevaluateOnChange>
        <targetObject>ParentId</targetObject>
    </fieldUpdates>
    <rules>
        <fullName>Support-Email is sent for an existing Case</fullName>
        <actions>
            <name>Update_last_contact_time</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <formula>true</formula>
        <triggerType>onCreateOnly</triggerType>
    </rules>
    <rules>
        <fullName>Support-Received new email on existing case</fullName>
        <actions>
            <name>Update_last_contact_time</name>
            <type>FieldUpdate</type>
        </actions>
        <actions>
            <name>Update_last_received_email</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <formula>And(Incoming,  Parent.CreatedDate &lt;&gt; now())</formula>
        <triggerType>onCreateOnly</triggerType>
    </rules>
    <rules>
        <fullName>Update Case Status</fullName>
        <actions>
            <name>Update_case_status_to_Samsara_pending</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <formula>And(Incoming, Parent.CreatedDate &lt;&gt; now(), Parent.Owner:Queue.QueueName != &apos;New Case Queue&apos;,  Parent.Touched__c = 1 )</formula>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
    <rules>
        <fullName>Update status to Pending-Customer</fullName>
        <actions>
            <name>Case_Status_Pending_Customer</name>
            <type>FieldUpdate</type>
        </actions>
        <active>true</active>
        <formula>And(!Incoming, Parent.CreatedDate &lt;&gt; now(), !ISPICKVAL( Parent.Status, &apos;Closed&apos;), FromAddress != &apos;no-reply@samsara.com&apos;,  !ISPICKVAL(Parent.Origin, &apos;Finance&apos;)  )</formula>
        <triggerType>onCreateOrTriggeringUpdate</triggerType>
    </rules>
</Workflow>
